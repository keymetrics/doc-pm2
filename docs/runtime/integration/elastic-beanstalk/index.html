

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Description">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <!-- <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script> -->
    <link rel="stylesheet" href="https://unpkg.com/docsify/lib/themes/vue.css">
    <link rel="stylesheet" href="https://unpkg.com/docsify-copy-code/styles.css">
    <link rel=“prefetch” href="https://fonts.googleapis.com/css?family=Roboto:400,500">
    <link rel="stylesheet" href="/assets/css/normalize.css">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/bundle.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="//unpkg.com/gitalk/dist/gitalk.css">
</head>

<body class="ready sticky">

    <template id="sidebar2-template">
    <div class="sidebar_2_wrapper">
        <div class="sidebar_2">
            <a href="/runtime/overview" data-page="runtime-page">
                <div class="sidebar_2_item sidebar_2_item_runtime">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-r.png">
                    <div class="sidebar_2_item__text">Runtime</div>
                </div>
            </a>
            <a href="/monitoring/overview" data-page="monitoring-page">
                <div class="sidebar_2_item sidebar_2_item_monitoring">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-m.png">
                    <div class="sidebar_2_item__text">Monitoring</div>
                </div>
            </a>
            <a href="/enterprise/overview" data-page="enterprise-page">
                <div class="sidebar_2_item sidebar_2_item_enterprise">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-e.png">
                    <div class="sidebar_2_item__text">Enterprise</div>
                </div>
            </a>
        </div>
        <div class="main_content">
        </div>
    </div>
</template>
<div class="footer-fixed-box"></div>
<div class="section header-section">
    <div class=" header-container">
        <div class="PM2_logo_wrapper">
            <a class="logo-container link">
                <div class="PM2_logo"></div>
            </a>
        </div>
        <div class="PM2_search search-wrapper">
            <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input class="search_input ds-input" placeholder="Search documentation..." autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Blender, sans-serif; font-size: 18px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span>
            <div class="PM2_search_icon"><i class="fas fa-search"></i></div>
            <div id="hits" class="algolia-results">
                <!-- Hits widget will appear here -->
            </div>
        </div>
    </div>
</div>
<nav class="app-nav no-badge">
    <!--navbar-->
</nav>

    <!-- MAIN-CONTENT AREA -->
    <main>
        <aside class="sidebar">
    <div class="sidebar_2_wrapper">
        <div class="sidebar_2">
            <a href="/runtime/overview" data-page="runtime-page">
                <div class="sidebar_2_item sidebar_2_item_runtime">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-r.png">
                    <div class="sidebar_2_item__text">Runtime</div>
                </div>
            </a>
            <a href="/monitoring/overview" data-page="monitoring-page">
                <div class="sidebar_2_item sidebar_2_item_monitoring">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-m.png">
                    <div class="sidebar_2_item__text">Monitoring</div>
                </div>
            </a>
            <a href="/enterprise/overview" data-page="enterprise-page">
                <div class="sidebar_2_item sidebar_2_item_enterprise">
                    <img class="sidebar_2_item__image" src="/assets/static/pm2-logo-e.png">
                    <div class="sidebar_2_item__text">Enterprise</div>
                </div>
            </a>
        <div class="lang-selector">
          <!-- Adds links to other languages on the post -->
          
            
          
            
              
                <a href="/ch/runtime/integration/elastic-beanstalk/" >Language: <br>Chinese (中文版)</a>
              

              

              

            
          
        </div>
        </div>
        <div class="main_content">
        </div>
    </div>
    <div class="sidebar-nav">

    <ul id="acc">
    
    
    
    
    
        <li class="">
            <a href="/runtime/overview/">Overview</a>
            
        </li>
    
    
    
    
        <li class="">
            <a href="/runtime/quick-start/">Quick Start</a>
            
        </li>
    
    
    
    
        <li class="">
            <a href="/runtime/guide/">Guide</a>
            
                
            
        </li>
    
    
    
    
        <li class="">
            <a href="/runtime/production-best-practices/">Production Best Practices</a>
            
                
            
        </li>
    
    
    
    
        <li class="active">
            <a href="/runtime/integration/">Integration</a>
            
                
                    <ul>
                        
                        
                        <li class="active"><a href="/runtime/integration/elastic-beanstalk/">AWS Elastic Beanstalk</a></li>
                        
                        
                        <li class=""><a href="/runtime/integration/docker/">Docker</a></li>
                        
                        
                        <li class=""><a href="/runtime/integration/heroku/">Heroku</a></li>
                        
                        
                        <li class=""><a href="/runtime/integration/transpilers/">Transpilers</a></li>
                        
                        
                        <li class=""><a href="/runtime/integration/cloud-providers/">With a Cloud Provider</a></li>
                        
                    </ul>
                
            
        </li>
    
    
    
    
        <li class="">
            <a href="/runtime/references/">References</a>
            
                
            
        </li>
    
    </ul>

    </div>
</aside>

        <section class="content">
            <div class="markdown-section gettings_started_block topBlock">
    <p style="display: initial;">Getting started with PM2<span class="runtime_block gettings_started_block_span">Runtime</span><span class="monitoring_block gettings_started_block_span">Monitoring</span><span class="enterprise_block gettings_started_block_span">Enterprise</span></p>
</div>
            <article id="main" class="markdown-section">
                 <h1 id="using-pm2-with-aws-elastic-beanstalk">Using PM2 with AWS Elastic Beanstalk</h1>

<p>This page will guide you step by step through the PM2 integration in an AWS Elastic Beanstalk environment.</p>

<p>We will use Git and the Elastic Beanstalk CLI.</p>

<hr />

<h2 id="prepare-your-app">Prepare your app</h2>

<h3 id="set-your-ecosystem-file">Set your ecosystem file</h3>

<p>Generate an <code class="highlighter-rouge">ecosystem.config.js</code> template with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 init
</code></pre></div></div>

<p>Change the template to suit your needs:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">"app"</span><span class="p">,</span>
    <span class="na">script</span><span class="p">:</span> <span class="s2">"./app.js"</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="s2">"development"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">env_production</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="s2">"production"</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>?&gt; Learn more about ecosystem file <a href="runtime/guide/ecosystem-file.md">here</a>.</p>

<h3 id="add-pm2-as-a-module">Add PM2 as a module</h3>

<p>Add pm2 as a dependency to your projet.</p>

<p>With npm:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install <span class="nt">--save</span> pm2
</code></pre></div></div>

<p>With yarn:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add pm2
</code></pre></div></div>

<h3 id="set-your-packagejson">Set your package.json</h3>

<p>In your <code class="highlighter-rouge">package.json</code>, modify the start script to:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"node ./node_modules/.bin/pm2-runtime start ecosystem.config.js --env production"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h2 id="deploy-with-elastic-beanstalk-cli">Deploy with Elastic Beanstalk CLI</h2>

<h3 id="create-an-account-on-aws-and-get-your-access-keys">Create an account on AWS and get your access keys</h3>

<p>Sign up for an account on AWS <a href="https://console.aws.amazon.com/elasticbeanstalk/">here</a>.</p>

<p>In order to get access keys, you must create an IAM user. You can do that <a href="https://console.aws.amazon.com/iam/home#/home">here</a>.</p>

<p>Add a user:</p>

<p><img src="IAM-add.png" alt="create an IAM User" /></p>

<p>Give it the programmatic access:</p>

<p><img src="IAM-prog.png" alt="select programmatic access" /></p>

<p>Select the <code class="highlighter-rouge">ElasticBeanstalkFullAccess</code> strategy:</p>

<p><img src="IAM-strat.png" alt="select programmatic access" /></p>

<p>Create the user and you will get your access keys:</p>

<p><img src="IAM-creds.png" alt="access keys" /></p>

<p>Copy and paste your <code class="highlighter-rouge">access-id</code> and your <code class="highlighter-rouge">secret-key</code> in your AWS config file (<code class="highlighter-rouge">~/.aws/config</code>):</p>

<pre><code class="language-Vim">[profile eb-cli]
aws_access_key_id = YYYYYYYYYYYYY
aws_secret_access_key = XXXXXXXXXXXXXXXXXXXXX
</code></pre>

<h3 id="install-the-cli">Install the CLI</h3>

<p>The CLI is available with pip, the python package manager:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 install <span class="nt">--upgrade</span> <span class="nt">--user</span> awsebcli
</code></pre></div></div>

<p>?&gt; Further instructions to install <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3.html">here</a>.</p>

<h3 id="init-your-elastic-beanstalk-app">Init your Elastic Beanstalk app</h3>

<p>Run <code class="highlighter-rouge">eb init -p Node.js</code> to initialize your Node.js app:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb init <span class="nt">--profile</span> eb-cli <span class="nt">-p</span> Node.js

Select a default region
2<span class="o">)</span> us-west-1 : US West <span class="o">(</span>N. California<span class="o">)</span>

Select an application to use
<span class="o">[</span> Create new Application <span class="o">]</span>

Enter Application Name
eb-pm2-example
Application eb-pm2-example has been created.

Do you want to <span class="nb">set </span>up SSH <span class="k">for </span>your instances?
<span class="o">(</span>y/n<span class="o">)</span>: n
</code></pre></div></div>

<p>For a description of each option see the AWS example <a href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs_express.html">here</a></p>

<h3 id="create-an-elastic-beanstalk-environment">Create an Elastic Beanstalk environment</h3>

<p>Each application can have many environments, which is useful to manage separate environments for development, testing or production.</p>

<p>Before creating an environment, make sure to commit your changes. The Elastic Beanstalk uses <code class="highlighter-rouge">git archive</code> to create a .zip file from the contents of the most recent git commit command.</p>

<p>To create a new environment, run the following:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb create eb-pm2-example-env
</code></pre></div></div>

<p>List all available environments with:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb list
eb-pm2-example-env
</code></pre></div></div>

<p>Get environment infos and status with:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eb status

Environment details <span class="k">for</span>: eb-pm2-example-env
  Application name: eb-pm2-example
  Region: us-west-2
  Deployed Version: app-4408-180305
  Environment ID: e-gekedaw
  Platform: arn:aws:elasticbeanstalk:us-west-1::platform/Node.js running on 64bit Amazon Linux/4.4.5
  Tier: WebServer-Standard-1.0
  CNAME: eb-pm2-example.us-west-2.elasticbeanstalk.com
  Updated: 2018-02-19 23:51:59.259000+00:00
  Status: Ready
  Health: Green
</code></pre></div></div>

<p>?&gt; Later, to deploy latest changes, commit them and run <code class="highlighter-rouge">eb deploy &lt;environment_name&gt;</code> or just <code class="highlighter-rouge">eb deploy</code>.</p>

<hr />

<h2 id="you-are-ready">You are ready</h2>

<p>That’s all! Run <code class="highlighter-rouge">eb open</code> to open your app in the browser.</p>

<hr />

<h2 id="next-step">Next step</h2>

<p>Complete your configuration with the <a href="runtime/guide/ecosystem-file.md">Ecosystem File</a></p>

<p>Monitor your app on a dashboard, with <a href="monitoring/integration/beanstalk.md">PM2 Monitoring</a></p>

<hr />

<h2 id="questions-">Questions ?</h2>

<p>We are always happy to help with questions you might have. Search our documentation or check out answers to common questions. You can also post questions or comments to our community forum.</p>



            </article>

        </section>

        
    </main>
</body>
    <script>window.$docsify = {"basePath":"/docs","alias":{"/runtime/.*/_sidebar.md":"/runtime/_sidebar.md","/monitoring/.*/_sidebar.md":"/monitoring/_sidebar.md","/enterprise/.*/_sidebar.md":"/enterprise/_sidebar.md"},"auto2top":true,"coverpage":false,"executeScript":true,"loadSidebar":"_sidebar.md","loadNavbar":false,"mergeNavbar":false,"subMaxLevel":1,"name":"","search":false,"plugins":[],"routerMode":"history"}</script>
<!-- <script src="//unpkg.com/docsify/lib/docsify.min.js"></script> -->
<!-- <script src="/assets/js/docsify.js"></script> -->
<script src="/assets/js/scripts.js" type="text/javascript"></script>
<script src="https://unpkg.com/clipboard@2.0.0/dist/clipboard.min.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs@1.13.0/prism.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs/components/prism-bash.min.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs/components/prism-markdown.min.js" type="text/javascript"></script>
<script src="https://unpkg.com/prismjs/components/prism-nginx.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/assets/js/prism-clipboard.js" type="text/javascript"></script>
<!-- <script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> -->
<!-- <script src="/assets/js/gittalk.js"></script> -->
<script src="/assets/js/keymetrics-plugins.js" type="text/javascript"></script>
<script src="/assets/js/additional.js" type="text/javascript"></script>
</html>
